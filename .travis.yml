language:
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then sh; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]];   then php; fi

os:
  - windows
  - linux

sudo: false

php:
  - 5.4
  - 5.5
  - 5.6
  - 7.0
  - 7.1
  - 7.2
  - nightly
  - hhvm

matrix:
  allow_failures:
    - php: nightly
    - php: hhvm

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then choco install php --version 7.2.15; fi
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then choco install composer; fi
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then export PATH=/c/tools/php72:$PATH; fi

install:
  - - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then composer install; fi
script: vendor/bin/phpunit --coverage-clover=coverage.clover
